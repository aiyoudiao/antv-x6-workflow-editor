import{r as n,bk as k,aS as j,k as e,am as A,J as c}from"./index-By7LVFEb.js";import{c as C}from"./ProCard-DiYOBRon.js";import{S as u}from"./index-BdVCeMI6.js";import{F as E,P as b}from"./Table-C2PP8qdA.js";import{s as v}from"./index-DMMr8qE4.js";import{M as S}from"./index-Ch_uXHlR.js";import"./useBreakpoint-DuXY7LLf.js";import"./responsiveObserver-Df7pYaKA.js";import"./row-C5RCK80R.js";import"./index-BlIBobm-.js";import"./EllipsisOutlined-Cjbi_cm8.js";import"./index-Be51NT_g.js";import"./iconUtil-bCxqbMW5.js";import"./index-DaELeVl_.js";import"./index-CXc37OxH.js";import"./LeftOutlined-B73zp3q9.js";import"./index-hY_oRCre.js";import"./move-DRqfdePk.js";import"./DownOutlined-DJfcqcs1.js";import"./SearchOutlined-DaieAUVv.js";import"./index-xcVGidrh.js";import"./Sider-CXs0ZGHn.js";import"./Pagination-BGkHNFMC.js";import"./index-CbKWr7MU.js";import"./index-DXjkq9o_.js";var I={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 688a48 48 0 1096 0 48 48 0 10-96 0zm24-112h48c4.4 0 8-3.6 8-8V296c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8z"}}]},name:"exclamation-circle",theme:"outlined"},z=function(a,r){return n.createElement(k,j({},a,{ref:r,icon:I}))},M=n.forwardRef(z);const w=n.createContext(void 0),h=({children:i})=>{const[a,r]=n.useState([]);n.useEffect(()=>{const t=localStorage.getItem("approvalFlows");t&&r(JSON.parse(t))},[]),n.useEffect(()=>{localStorage.setItem("approvalFlows",JSON.stringify(a))},[a]);const d=t=>{r([...a,t])},m=t=>{r(a.map(o=>o.id===t.id?t:o))},x=t=>{r(a.filter(o=>o.id!==t))},s=t=>{r(a.map(o=>o.id===t?{...o,enabled:!o.enabled}:o))};return e.jsx(w.Provider,{value:{approvalFlows:a,addApprovalFlow:d,updateApprovalFlow:m,deleteApprovalFlow:x,toggleEnableApprovalFlow:s},children:i})},O=()=>{const i=n.useContext(w);if(!i)throw new Error("useApprovalFlowContext must be used within an ApprovalFlowProvider");return i},{confirm:P}=S,T=()=>{const{approvalFlows:i,addApprovalFlow:a,updateApprovalFlow:r,deleteApprovalFlow:d,toggleEnableApprovalFlow:m}=O(),[x,s]=n.useState(null);n.useState(!1);const t=A(),o=()=>{s(null),t("/workflow/instance")},F=l=>{s(l)},f=l=>{P({title:"确认删除该审批流程模型吗？",icon:e.jsx(M,{}),onOk(){d(l),v.success("删除成功")}})},g=l=>{m(l.id),v.success(l.enabled?"禁用成功":"启用成功")},y=[{title:"审批流程编号",dataIndex:"id",key:"id"},{title:"审批流程名称",dataIndex:"name",key:"name"},{title:"流程类型",dataIndex:"type",key:"type"},{title:"创建人",dataIndex:"creator",key:"creator"},{title:"创建时间",dataIndex:"createTime",key:"createTime"},{title:"更新时间",dataIndex:"updateTime",key:"updateTime"},{title:"是否启用",dataIndex:"enabled",key:"enabled",render:l=>l?"是":"否"},{title:"操作",key:"action",render:(l,p)=>e.jsxs(u,{size:4,children:[e.jsx(c,{type:"link",onClick:()=>F(p),children:"编辑"}),e.jsx(b,{placement:"top",title:"确认删除该行数据吗？",onConfirm:()=>f(p.id),children:e.jsx(c,{type:"link",danger:!0,children:"删除"})}),e.jsx(c,{type:"link",onClick:()=>g(p),children:p.enabled?"禁用":"启用"})]})}];return e.jsx(h,{children:e.jsxs(C,{className:"h-full",children:[e.jsx("section",{style:{display:"flex",justifyContent:"end",marginBottom:16},children:e.jsx(u,{size:8,children:e.jsx(c,{type:"primary",onClick:o,children:"新增审批流程"})})}),e.jsx(E,{columns:y,dataSource:i,pagination:{pageSize:10}})]})})},re=()=>e.jsx(h,{children:e.jsx(T,{})});export{T as ApprovalFlowManage,re as Component};
