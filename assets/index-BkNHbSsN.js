import{r as _,e as ve,ah as b,aa as ye,b1 as Z,c4 as P,c5 as ee,k as c,J as V}from"./index-DOidnLbw.js";import{m as xe,N as le,M as Te,a as z,G as Ce,S as Re,K as Ie,b as we,O as B,P as Ve,c as J,u as te,i as Ne}from"./index-Lsi829FL.js";import{d as je}from"./throttle-BJiVXReG.js";import{F as N}from"./index-CQTWKsIk.js";import{L as ne}from"./index-DG02mKbh.js";import{I as W}from"./index-Du93ur76.js";import{S as D}from"./index-zAgFv2nA.js";import{D as re}from"./index-Dh5i4QlD.js";import{S as Ae}from"./index-CLaLC4Rr.js";import"./row-Crs_fbP-.js";import"./responsiveObserver-B6o5nBvF.js";import"./index-S1lJ4ixp.js";import"./LeftOutlined-D-UsO_Ex.js";import"./useBreakpoint-lKmYnE_n.js";import"./SearchOutlined-Dv63GpJ6.js";import"./Overflow-BLRmmTpP.js";import"./index-sKfbGOAj.js";import"./DownOutlined-BIWRsmmC.js";const Pe={BASE_URL:"/antv-x6-workflow-editor/",DEV:!1,MODE:"prod",PROD:!0,SSR:!1,VITE_APP_DESC:"SoybeanAdmin is a fresh and elegant admin template",VITE_APP_TITLE:"SoybeanAdmin",VITE_AUTH_ROUTE_MODE:"static",VITE_AUTOMATICALLY_DETECT_UPDATE:"Y",VITE_BASE_URL:"/antv-x6-workflow-editor/",VITE_CONSTANT_ROUTE_MODE:"static",VITE_HTTP_PROXY:"Y",VITE_ICON_LOCAL_PREFIX:"icon-local",VITE_ICON_PREFIX:"icon",VITE_MENU_ICON:"mdi:menu",VITE_OTHER_SERVICE_BASE_URL:`{
  "demo": "http://localhost:9529"
}`,VITE_ROUTER_HISTORY_MODE:"history",VITE_ROUTE_HOME:"home",VITE_SERVICE_BASE_URL:"https://mock.apifox.cn/m1/3109515-0-default",VITE_SERVICE_EXPIRED_TOKEN_CODES:"9999,9998,3333",VITE_SERVICE_LOGOUT_CODES:"8888,8889",VITE_SERVICE_MODAL_LOGOUT_CODES:"7777,7778",VITE_SERVICE_SUCCESS_CODE:"0000",VITE_SOURCE_MAP:"N",VITE_STATIC_SUPER_ROLE:"R_SUPER",VITE_STORAGE_PREFIX:"SOY-REACT_"},oe=n=>{let e;const t=new Set,r=(h,S)=>{const p=typeof h=="function"?h(e):h;if(!Object.is(p,e)){const y=e;e=S??(typeof p!="object"||p===null)?p:Object.assign({},e,p),t.forEach(m=>m(e,y))}},o=()=>e,u={setState:r,getState:o,getInitialState:()=>v,subscribe:h=>(t.add(h),()=>t.delete(h)),destroy:()=>{(Pe?"prod":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),t.clear()}},v=e=n(r,o,u);return u},De=n=>n?oe(n):oe;var de={exports:{}},ue={},fe={exports:{}},pe={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var M=_;function Le(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var ke=typeof Object.is=="function"?Object.is:Le,Ue=M.useState,Me=M.useEffect,Ge=M.useLayoutEffect,Fe=M.useDebugValue;function He(n,e){var t=e(),r=Ue({inst:{value:t,getSnapshot:e}}),o=r[0].inst,i=r[1];return Ge(function(){o.value=t,o.getSnapshot=e,X(o)&&i({inst:o})},[n,t,e]),Me(function(){return X(o)&&i({inst:o}),n(function(){X(o)&&i({inst:o})})},[n]),Fe(t),t}function X(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!ke(n,t)}catch{return!0}}function Be(n,e){return e()}var Je=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Be:He;pe.useSyncExternalStore=M.useSyncExternalStore!==void 0?M.useSyncExternalStore:Je;fe.exports=pe;var We=fe.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var H=_,Xe=We;function Ye(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var ze=typeof Object.is=="function"?Object.is:Ye,$e=Xe.useSyncExternalStore,qe=H.useRef,Ke=H.useEffect,Qe=H.useMemo,Ze=H.useDebugValue;ue.useSyncExternalStoreWithSelector=function(n,e,t,r,o){var i=qe(null);if(i.current===null){var a={hasValue:!1,value:null};i.current=a}else a=i.current;i=Qe(function(){function u(y){if(!v){if(v=!0,h=y,y=r(y),o!==void 0&&a.hasValue){var m=a.value;if(o(m,y))return S=m}return S=y}if(m=S,ze(h,y))return m;var x=r(y);return o!==void 0&&o(m,x)?m:(h=y,S=x)}var v=!1,h,S,p=t===void 0?null:t;return[function(){return u(e())},p===null?void 0:function(){return u(p())}]},[e,t,r,o]);var O=$e(n,i[0],i[1]);return Ke(function(){a.hasValue=!0,a.value=O},[O]),Ze(O),O};de.exports=ue;var et=de.exports;const tt=ve(et),Ee={BASE_URL:"/antv-x6-workflow-editor/",DEV:!1,MODE:"prod",PROD:!0,SSR:!1,VITE_APP_DESC:"SoybeanAdmin is a fresh and elegant admin template",VITE_APP_TITLE:"SoybeanAdmin",VITE_AUTH_ROUTE_MODE:"static",VITE_AUTOMATICALLY_DETECT_UPDATE:"Y",VITE_BASE_URL:"/antv-x6-workflow-editor/",VITE_CONSTANT_ROUTE_MODE:"static",VITE_HTTP_PROXY:"Y",VITE_ICON_LOCAL_PREFIX:"icon-local",VITE_ICON_PREFIX:"icon",VITE_MENU_ICON:"mdi:menu",VITE_OTHER_SERVICE_BASE_URL:`{
  "demo": "http://localhost:9529"
}`,VITE_ROUTER_HISTORY_MODE:"history",VITE_ROUTE_HOME:"home",VITE_SERVICE_BASE_URL:"https://mock.apifox.cn/m1/3109515-0-default",VITE_SERVICE_EXPIRED_TOKEN_CODES:"9999,9998,3333",VITE_SERVICE_LOGOUT_CODES:"8888,8889",VITE_SERVICE_MODAL_LOGOUT_CODES:"7777,7778",VITE_SERVICE_SUCCESS_CODE:"0000",VITE_SOURCE_MAP:"N",VITE_STATIC_SUPER_ROLE:"R_SUPER",VITE_STORAGE_PREFIX:"SOY-REACT_"},{useDebugValue:nt}=b,{useSyncExternalStoreWithSelector:rt}=tt;let ie=!1;const ot=n=>n;function he(n,e=ot,t){(Ee?"prod":void 0)!=="production"&&t&&!ie&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),ie=!0);const r=rt(n.subscribe,n.getState,n.getServerState||n.getInitialState,e,t);return nt(r),r}const se=n=>{(Ee?"prod":void 0)!=="production"&&typeof n!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof n=="function"?De(n):n,t=(r,o)=>he(e,r,o);return Object.assign(t,e),t},it=n=>n?se(n):se;class ae extends le{}(function(n){function e(t){const r=[],o=Te.getForeignObjectMarkup();return t?r.push({tagName:t,selector:"body"},o):r.push(o),r}n.config({view:"react-shape-view",markup:e(),attrs:{body:{fill:"none",stroke:"none",refWidth:"100%",refHeight:"100%"},fo:{refWidth:"100%",refHeight:"100%"}},propHooks(t){if(t.markup==null){const r=t.primer;if(r){t.markup=e(r);let o={};switch(r){case"circle":o={refCx:"50%",refCy:"50%",refR:"50%"};break;case"ellipse":o={refCx:"50%",refCy:"50%",refRx:"50%",refRy:"50%"};break}t.attrs=xe({},{body:Object.assign({refWidth:null,refHeight:null},o)},t.attrs||{})}}return t}}),le.registry.register("react-shape",n,!0)})(ae||(ae={}));var U;(function(n){let e=!1,t;const r=(u,v)=>{const h=v.payload;switch(v.type){case"add":{const S=u.findIndex(p=>p.id===h.id);return S>=0?(u[S]=h,[...u]):[...u,h]}case"remove":{const S=u.findIndex(p=>p.id===h.id);if(S>=0){const p=[...u];return p.splice(S,1),p}break}}return u};function o(u,v){e&&t({type:"add",payload:{id:u,portal:v}})}n.connect=o;function i(u){e&&t({type:"remove",payload:{id:u}})}n.disconnect=i;function a(){return e}n.isActive=a;function O(){return()=>{e=!0;const[u,v]=_.useReducer(r,[]);return t=v,b.createElement(b.Fragment,{children:u.map(h=>h.portal)})}}n.getProvider=O})(U||(U={}));const ce={};class st extends b.PureComponent{constructor(e){super(e),this.state={tick:0}}componentDidMount(){const{node:e}=this.props;e.on("change:*",({key:t})=>{const r=ce[e.shape];if(r){const{effect:o}=r;(!o||o.includes(t))&&this.setState({tick:this.state.tick+1})}})}clone(e){const{node:t,graph:r}=this.props;return typeof e.type=="string"?b.cloneElement(e):b.cloneElement(e,{node:t,graph:r})}render(){const{node:e}=this.props,t=ce[e.shape];if(!t)return null;const{component:r}=t;if(b.isValidElement(r))return this.clone(r);const o=r;return this.clone(b.createElement(o,null))}}class F extends z{getComponentContainer(){return this.selectors&&this.selectors.foContent}confirmUpdate(e){const t=super.confirmUpdate(e);return this.handleAction(t,F.action,()=>{this.renderReactComponent()})}renderReactComponent(){this.unmountReactComponent();const e=this.getComponentContainer(),t=this.cell;if(e){const r=t.model?t.model.graph:null,o=b.createElement(st,{node:t,graph:r});if(U.isActive()){const i=ye.createPortal(o,e);U.connect(this.cell.id,i)}else Z.render(o,e)}}unmountReactComponent(){const e=this.getComponentContainer();e&&Z.unmountComponentAtNode(e)}onMouseDown(e,t,r){const o=e.target;if(o.tagName.toLowerCase()==="input"){const a=o.getAttribute("type");if(a==null||["text","password","number","email","search","tel","url"].includes(a))return}super.onMouseDown(e,t,r)}unmount(){return U.isActive()&&U.disconnect(this.cell.id),this.unmountReactComponent(),super.unmount(),this}}(function(n){n.action="react",n.config({bootstrap:[n.action],actions:{component:n.action}}),z.registry.register("react-shape-view",n,!0)})(F||(F={}));var at=Object.defineProperty,ct=(n,e,t)=>e in n?at(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,lt=(n,e,t)=>(ct(n,e+"",t),t),$=_.createContext({graph:null,setGraph:()=>{}}),dt=({children:n})=>{const[e,t]=_.useState(null);return b.createElement($.Provider,{value:{graph:e,setGraph:t}},n)},q=()=>{const{graph:n}=_.useContext($);return n},ut=({children:n})=>q()?b.createElement(b.Fragment,null,n):null;function Y(n,e){if(typeof e!="object"||Array.isArray(e)||!e)return JSON.parse(JSON.stringify(e));if(typeof e=="object"&&e.toJSON!==void 0&&typeof e.toJSON=="function")return e.toJSON();let t=n;return typeof n!="object"&&(t={...e}),Object.keys(e).forEach(r=>{t.hasOwnProperty(r)||(t[r]=e[r]),e[r]===null||e[r]===void 0?delete t[r]:t[r]!==null&&t[r]!==void 0&&(t[r]=Y(t[r],e[r]))}),t}function me(n,e="/",t){const r={};Object.keys(n).forEach(o=>{const i=n[o];let a=Ne(i);if(a&&t&&t(i)&&(a=!1),a){const O=me(i,e,t);Object.keys(O).forEach(u=>{r[o+e+u]=O[u]})}else r[o]=i});for(const o in n)Object.prototype.hasOwnProperty.call(n,o);return r}var ft=()=>it(n=>({nodes:[],edges:[],changeList:[],initData:(e,t)=>n(P(r=>{r.nodes=e.nodes,r.edges=e.edges,t!=null&&t.silent||r.changeList.push({command:"init",data:e})})),addNodes:(e,t)=>n(P(r=>{if(!e.length)return;e.forEach(i=>{i.id||(i.id=te())});const o=r.nodes.find(i=>e.some(a=>a.id&&a.id===i.id));o?console.error(`node id=${o.id} already existed`):(r.nodes.push(...e),t!=null&&t.silent||r.changeList.push({command:"addNodes",data:e}))})),removeNodes:(e,t)=>n(P(r=>{e.length&&(r.nodes=r.nodes.filter(o=>!e.includes(o.id)),t!=null&&t.silent||r.changeList.push({command:"removeNodes",data:e}))})),updateNode:(e,t,r)=>n(P(o=>{const i=o.nodes.find(a=>a.id===e);if(i){const a=typeof t=="function"?t(ee(i)||{}):t;if(a.id!==void 0||a.shape!==void 0){console.error("id and shape can't be changed");return}Y(i,a),r!=null&&r.silent||o.changeList.push({command:"updateNode",data:{id:e,data:a}})}})),addEdges:(e,t)=>n(P(r=>{if(!e.length)return;e.forEach(i=>{i.id||(i.id=te())});const o=r.edges.find(i=>e.some(a=>a.id&&a.id===i.id));o?console.error(`edge id=${o.id} already existed`):(r.edges.push(...e),t!=null&&t.silent||r.changeList.push({command:"addEdges",data:e}))})),removeEdges:(e,t)=>n(P(r=>{e.length&&(r.edges=r.edges.filter(o=>!e.includes(o.id)),t!=null&&t.silent||r.changeList.push({command:"removeEdges",data:e}))})),updateEdge:(e,t,r)=>n(P(o=>{const i=o.edges.find(a=>a.id===e);if(i){const a=typeof t=="function"?t(ee(i)||{}):t;if(a.id!==void 0||a.shape!==void 0){console.error("id and shape can't be changed");return}Y(i,a),r!=null&&r.silent||o.changeList.push({command:"updateEdge",data:{id:e,data:a}})}})),clearChangeList:()=>n(P(e=>{e.changeList=[]}))})),ge=_.createContext(null),pt=({children:n})=>{const e=_.useRef();return e.current||(e.current=ft()),b.createElement(ge.Provider,{value:e.current},n)},Et=({children:n})=>b.createElement(pt,null,b.createElement(dt,null,n)),L=n=>{const e=_.useContext(ge);if(!e)throw new Error("can only be get inside the xflow component.");return he(e,n)};function ht(n){const e=_.useRef(n);return e.current=n,e}var G=(n,e)=>{const t=ht(e),r=q();_.useEffect(()=>(r&&(t.current=e,r.on(n,o=>{t.current(o)})),()=>{r&&t.current&&r.off(n,t.current)}),[r])},R="__inner__",mt=(n,e,t)=>{if(n==="position"){const{x:r,y:o}=Ve.create(e).snapToGrid(t.getGridSize());return{x:r,y:o}}return n==="size"?{width:e.width,height:e.height}:{[n]:e}},gt=n=>{const{centerView:e,centerViewOptions:t,fitView:r,fitViewOptions:o}=n,i=q(),a=L(s=>s.updateNode),O=L(s=>s.updateEdge),u=L(s=>s.addNodes),v=L(s=>s.addEdges),h=L(s=>s.removeNodes),S=L(s=>s.removeEdges),p=L(s=>s.changeList),y=L(s=>s.clearChangeList),m=s=>{if(i){const E=s.filter(l=>l.selected),d=s.filter(l=>!l.selected);i.select(E.map(l=>l.id),{[R]:!0}),i.unselect(d.map(l=>l.id),{[R]:!0})}},x=s=>{i&&s.forEach(E=>{const d=i.getCellById(E.id);d&&(E.animated?(d.attr("line/strokeDasharray",5,{[R]:!0}),d.attr("line/style/animation","animated-line 30s infinite linear",{[R]:!0})):(d.attr("line/strokeDasharray",0,{[R]:!0}),d.attr("line/style/animation","",{[R]:!0})))})},f=(s,E)=>{s.fromJSON(J(E)),e&&s.centerContent(t),r&&s.zoomToFit({maxScale:1,...o});const{nodes:d,edges:l}=E;m([...d,...l]),x([...l])},T=(s,E)=>{if(i){const d=Object.keys(E);if(d.includes("selected")){const l=!!E.selected;m([{id:s,selected:l}])}else if(d.includes("animated")){const l=!!E.animated;x([{id:s,animated:l}])}}},j=(s,E,d)=>{if(i){const l=i.getCellById(s);if(l){i.startBatch(d);const C=l.preprocess(E,!0),k=me(C);Object.keys(k).forEach(A=>{l.setPropByPath(A,k[A],{[R]:!0,rewrite:!0})}),T(s,E),i.stopBatch(d)}}},w=(s,E)=>{E.forEach(d=>{const{command:l,data:C}=d;switch(l){case"init":f(s,C);break;case"addNodes":const k=J(C);s.addNodes(k,{[R]:!0}),m(k);break;case"removeNodes":s.removeCells(C,{[R]:!0});break;case"updateNode":j(C.id,C.data,"updateNode");break;case"addEdges":const A=J(C);s.addEdges(A,{[R]:!0}),m(A),x(A);break;case"removeEdges":s.removeCells(C,{[R]:!0});break;case"updateEdge":j(C.id,C.data,"updateEdge");break}}),setTimeout(()=>{y()})};return _.useEffect(()=>{i&&p.length&&w(i,p)},[p,i]),G("cell:added",({cell:s,options:E})=>{if(!E[R]){if(s.isNode()){const d=[s.toJSON()];u(d,{silent:!0}),m(d)}else if(s.isEdge()){const d=[s.toJSON()];v(d,{silent:!0}),m(d),x(d)}}}),G("cell:removed",({cell:s})=>{s.isNode()?h([s.id],{silent:!0}):s.isEdge()&&S([s.id],{silent:!0})}),G("cell:change:*",je(({cell:s,key:E,current:d,options:l})=>{!l[R]&&i&&(s.isNode()?a(s.id,mt(E,d,i),{silent:!0}):s.isEdge()&&O(s.id,{[E]:d},{silent:!0}))},100,{leading:!0})),G("selection:changed",({added:s,removed:E,options:d})=>{d[R]||(s.forEach(l=>{l.isNode()?a(l.id,{selected:!0},{silent:!0}):l.isEdge()&&O(l.id,{selected:!0},{silent:!0})}),E.forEach(l=>{l.isNode()?a(l.id,{selected:!1},{silent:!0}):l.isEdge()&&O(l.id,{selected:!1},{silent:!0})}))}),null},_t=n=>{const e=_.useRef(null),{className:t,style:r,readonly:o,virtual:i,minScale:a,maxScale:O,zoomable:u,zoomOptions:v,pannable:h,panOptions:S,embedable:p,embedOptions:y,restrict:m,restrictOptions:x,connectionOptions:f,onPortRendered:T,onEdgeLabelRendered:j,createCellView:w,selectOptions:s,keyboardOptions:E,scroller:d,scrollerOptions:l,connectionEdgeOptions:C,defaultHighlightOptions:k,embedHighlightOptions:A,nodeAvailableHighlightOptions:Se,magnetAvailableHighlightOptions:be,magnetAdsorbedHighlightOptions:Oe}=n,{graph:g,setGraph:K}=_.useContext($);return _.useEffect(()=>{const I=new Ce({container:e.current,autoResize:!0,virtual:i,scaling:{min:a,max:O},connecting:{...f,createEdge(){return this.createEdge({shape:"edge",...C})}},highlighting:{default:k,embedding:A,nodeAvailable:Se,magnetAvailable:be,magnetAdsorbed:Oe},onPortRendered:T,onEdgeLabelRendered:j,createCellView:w});return I.use(new Re({enabled:!0,...s})),I.use(new Ie({enabled:!0,...E})),d&&I.use(new we({enabled:!0,...l})),K(I),()=>{I&&(I.dispose(),K(null))}},[]),_.useEffect(()=>{g&&(o?g.options.interacting=!1:g.options.interacting={nodeMovable:I=>I.cell.prop("draggable")!==!1,edgeMovable:I=>I.cell.prop("draggable")!==!1,edgeLabelMovable:I=>I.cell.prop("labelDraggable")===!0})},[g,o]),_.useEffect(()=>{g&&(u?(g.enableMouseWheel(),g.options.mousewheel={...B.defaults.mousewheel,...v,enabled:!0}):g.disableMouseWheel())},[g,u,v]),_.useEffect(()=>{g&&(h?(g.options.panning={...B.defaults.panning,enabled:!0,...S},g.enablePanning()):g.disablePanning())},[g,h,S]),_.useEffect(()=>{g&&(p?g.options.embedding={...B.defaults.embedding,enabled:!0,validate:()=>!0,...y}:g.options.embedding={enabled:!1,validate:()=>!1})},[g,p,y]),_.useEffect(()=>{g&&(m?g.options.translating={restrict:x?x.bound:m}:g.options.translating={restrict:!1})},[g,m,x]),b.createElement("div",{style:{width:"100%",height:"100%",...r},className:t},b.createElement("div",{ref:e,style:{width:"100%",height:"100%"}}),b.createElement(ut,null,b.createElement(gt,{connectionEdgeOptions:C,centerView:n.centerView,centerViewOptions:n.centerViewOptions,fitView:n.fitView,fitViewOptions:n.fitViewOptions})))},_e=class extends z{renderMarkup(){const n=this.cell.shape==="circle"?"circle":"rect";return this.renderJSONMarkup({tagName:n,selector:"body"})}update(){super.update({body:{refWidth:"100%",refHeight:"100%",fill:_e.nodeBackground}})}},St=_e;lt(St,"nodeBackground","#8f8f8f");const Ut=()=>{var y,m,x;const[n,e]=_.useState(null),[t,r]=_.useState(null),[o]=N.useForm(),i=[{id:"start",label:"开始节点",type:"start"},{id:"end",label:"结束节点",type:"end"},{id:"approve",label:"审批节点",type:"approve"},{id:"condition",label:"条件节点",type:"condition"}],a=f=>{e(f),f.on("node:selected",({node:T})=>r(T)),f.on("edge:selected",({edge:T})=>r(T)),f.on("blank:click",()=>r(null)),f.enableSelection(),f.enablePanning(),f.zoomTo(1)},O=()=>{n&&n.toJSON()},u=()=>{n&&n.toSVG(f=>{const T=new Blob([f],{type:"image/svg+xml"}),j=URL.createObjectURL(T),w=document.createElement("a");w.href=j,w.download="flow-diagram.svg",w.click()})},v=()=>{if(n){const f=n.toJSON(),T=new Blob([JSON.stringify(f)],{type:"application/json"}),j=URL.createObjectURL(T),w=document.createElement("a");w.href=j,w.download="flow-diagram.json",w.click()}},h=f=>{t&&t.isNode()&&(t.setData(f),t.attr("label/text",f.label))},S=f=>{t&&t.isEdge()&&(t.setLabels([{attrs:{label:{text:f.label}}}]),t.setAttrs({line:{stroke:f.color,strokeWidth:f.width,targetMarker:{name:f.arrow?"block":null}}}))},p=()=>{t&&(n==null||n.removeCell(t),r(null))};return c.jsxs("div",{className:"flow-editor",children:[c.jsxs("div",{className:"toolbar",children:[c.jsx(V,{onClick:O,children:"保存"}),c.jsx(V,{onClick:()=>n==null?void 0:n.undo(),children:"撤销"}),c.jsx(V,{onClick:()=>n==null?void 0:n.redo(),children:"重做"}),c.jsx(V,{onClick:v,children:"导出 JSON"}),c.jsx(V,{onClick:u,children:"导出 SVG"})]}),c.jsxs("div",{className:"flow-editor__body",children:[c.jsx("div",{className:"node-list",children:c.jsx(ne,{header:c.jsx("div",{children:"节点列表"}),bordered:!0,dataSource:i,renderItem:f=>c.jsx(ne.Item,{draggable:!0,onDragStart:T=>{T.dataTransfer.setData("node/type",f.type),T.dataTransfer.setData("node/label",f.label)},children:f.label})})}),c.jsx(Et,{onLoad:a,children:c.jsx(_t,{})}),c.jsxs("div",{className:"properties-panel",children:[t&&t.isNode()&&c.jsxs(N,{form:o,layout:"vertical",onFinish:h,initialValues:t.getData(),children:[c.jsx(N.Item,{label:"标签",name:"label",children:c.jsx(W,{})}),c.jsx(N.Item,{label:"类型",name:"type",children:c.jsxs(D,{children:[c.jsx(D.Option,{value:"start",children:"开始节点"}),c.jsx(D.Option,{value:"end",children:"结束节点"}),c.jsx(D.Option,{value:"approve",children:"审批节点"}),c.jsx(D.Option,{value:"condition",children:"条件节点"})]})}),c.jsx(V,{type:"primary",htmlType:"submit",children:"更新属性"}),c.jsx(re,{}),c.jsx(V,{danger:!0,onClick:p,children:"删除节点"})]}),t&&t.isEdge()&&c.jsxs(N,{form:o,layout:"vertical",onFinish:S,initialValues:{label:(x=(m=(y=t.getLabels()[0])==null?void 0:y.attrs)==null?void 0:m.label)==null?void 0:x.text,color:t.attr("line/stroke"),width:t.attr("line/strokeWidth"),arrow:t.attr("line/targetMarker/name")==="block"},children:[c.jsx(N.Item,{label:"标签",name:"label",children:c.jsx(W,{})}),c.jsx(N.Item,{label:"颜色",name:"color",children:c.jsx(W,{type:"color"})}),c.jsx(N.Item,{label:"宽度",name:"width",children:c.jsx(Ae,{min:1,max:5})}),c.jsx(N.Item,{name:"arrow",valuePropName:"checked",children:c.jsxs(D,{children:[c.jsx(D.Option,{value:"true",children:"有箭头"}),c.jsx(D.Option,{value:"false",children:"无箭头"})]})}),c.jsx(V,{type:"primary",htmlType:"submit",children:"更新连线属性"}),c.jsx(re,{}),c.jsx(V,{danger:!0,onClick:p,children:"删除连线"})]})]})]})]})};export{Ut as Component};
