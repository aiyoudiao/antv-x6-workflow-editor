import{dH as v,dI as x,dJ as y,dK as F,ah as c,aw as P,bg as O,dL as j,r as b,C as w,dM as E,dN as M}from"./index-DfAWM7Uj.js";let a=null,i=e=>e(),f=[],g={};function h(){const{getContainer:e,duration:s,rtl:o,maxCount:n,top:t}=g,r=(e==null?void 0:e())||document.body;return{getContainer:()=>r,duration:s,rtl:o,maxCount:n,top:t}}const I=c.forwardRef((e,s)=>{const{messageConfig:o,sync:n}=e,{getPrefixCls:t}=b.useContext(w),r=g.prefixCls||t("message"),u=b.useContext(E),[d,C]=M(Object.assign(Object.assign(Object.assign({},o),{prefixCls:r}),u.message));return c.useImperativeHandle(s,()=>{const l=Object.assign({},d);return Object.keys(l).forEach(m=>{l[m]=function(){return n(),d[m].apply(d,arguments)}}),{instance:l,sync:n}}),C}),R=c.forwardRef((e,s)=>{const[o,n]=c.useState(h),t=()=>{n(h)};c.useEffect(t,[]);const r=j(),u=r.getRootPrefixCls(),d=r.getIconPrefixCls(),C=r.getTheme(),l=c.createElement(I,{ref:s,sync:t,messageConfig:o});return c.createElement(O,{prefixCls:u,iconPrefixCls:d,theme:C},r.holderRender?r.holderRender(l):l)});function p(){if(!a){const e=document.createDocumentFragment(),s={fragment:e};a=s,i(()=>{F(c.createElement(R,{ref:o=>{const{instance:n,sync:t}=o||{};Promise.resolve().then(()=>{!s.instance&&n&&(s.instance=n,s.sync=t,p())})}}),e)});return}a.instance&&(f.forEach(e=>{const{type:s,skipped:o}=e;if(!o)switch(s){case"open":{i(()=>{const n=a.instance.open(Object.assign(Object.assign({},g),e.config));n==null||n.then(e.resolve),e.setCloseFn(n)});break}case"destroy":i(()=>{a==null||a.instance.destroy(e.key)});break;default:i(()=>{var n;const t=(n=a.instance)[s].apply(n,P(e.args));t==null||t.then(e.resolve),e.setCloseFn(t)})}}),f=[])}function G(e){g=Object.assign(Object.assign({},g),e),i(()=>{var s;(s=a==null?void 0:a.sync)===null||s===void 0||s.call(a)})}function H(e){const s=v(o=>{let n;const t={type:"open",config:e,resolve:o,setCloseFn:r=>{n=r}};return f.push(t),()=>{n?i(()=>{n()}):t.skipped=!0}});return p(),s}function A(e,s){const o=v(n=>{let t;const r={type:e,args:s,resolve:n,setCloseFn:u=>{t=u}};return f.push(r),()=>{t?i(()=>{t()}):r.skipped=!0}});return p(),o}const N=e=>{f.push({type:"destroy",key:e}),p()},D=["success","info","warning","error","loading"],S={open:H,destroy:N,config:G,useMessage:x,_InternalPanelDoNotUseOrYouWillBeFired:y},W=S;D.forEach(e=>{W[e]=function(){for(var s=arguments.length,o=new Array(s),n=0;n<s;n++)o[n]=arguments[n];return A(e,o)}});export{W as s};
