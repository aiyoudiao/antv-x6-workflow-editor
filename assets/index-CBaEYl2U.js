import{r as o,b8 as le,b9 as Te,ba as he,bb as te,aw as tr,bc as We,bd as ue,ah as Q,aQ as f,be as G,bf as ze,bg as se,k as t,a as Ae,bh as nr,J,bi as Ke,bj as De}from"./index-By7LVFEb.js";import{S as de}from"./index-BdVCeMI6.js";import{F as _e,P as ke}from"./Table-C2PP8qdA.js";import{D as Ve}from"./index-CwVylhdH.js";import{i as Le,m as ar,F as qe,u as Ge,n as ir,a as xe,E as Je,b as or,r as sr,c as lr,P as ur,G as dr,d as cr,e as fr,W as X}from"./index-DiNfcpO0.js";import{u as vr,a as He,L as mr,b as pr,p as hr,o as Ee,P as yr,c as gr}from"./ProCard-DiYOBRon.js";import{F as ae}from"./index-BfOb6dPx.js";import{m as br}from"./merge-DWbNuhzr.js";import{S as xr}from"./index-CbKWr7MU.js";import{T as Qe}from"./index-BlIBobm-.js";import"./index-Be51NT_g.js";import"./iconUtil-bCxqbMW5.js";import"./index-DaELeVl_.js";import"./index-CXc37OxH.js";import"./EllipsisOutlined-Cjbi_cm8.js";import"./LeftOutlined-B73zp3q9.js";import"./index-hY_oRCre.js";import"./move-DRqfdePk.js";import"./DownOutlined-DJfcqcs1.js";import"./SearchOutlined-DaieAUVv.js";import"./index-xcVGidrh.js";import"./Sider-CXs0ZGHn.js";import"./useBreakpoint-DuXY7LLf.js";import"./responsiveObserver-Df7pYaKA.js";import"./Pagination-BGkHNFMC.js";import"./index-DXjkq9o_.js";import"./_baseGetTag-Bq09t9ym.js";import"./debounce-0m9V1xj8.js";import"./throttle-DNHjvvKc.js";import"./index-Cbz1M7cv.js";import"./index-DDmXffNF.js";import"./toNumber-Ch91Usde.js";import"./row-C5RCK80R.js";var Re=0;function Pr(e){var r=o.useRef(null),s=o.useState(function(){return e.proFieldKey?e.proFieldKey.toString():(Re+=1,Re.toString())}),i=le(s,1),a=i[0],n=o.useRef(a),m=function(){var v=Te(he().mark(function y(){var d,b,l,p;return he().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return(d=r.current)===null||d===void 0||d.abort(),l=new AbortController,r.current=l,h.next=5,Promise.race([(b=e.request)===null||b===void 0?void 0:b.call(e,e.params,e),new Promise(function(V,I){var c;(c=r.current)===null||c===void 0||(c=c.signal)===null||c===void 0||c.addEventListener("abort",function(){I(new Error("aborted"))})})]);case 5:return p=h.sent,h.abrupt("return",p);case 7:case"end":return h.stop()}},y)}));return function(){return v.apply(this,arguments)}}();o.useEffect(function(){return function(){Re+=1}},[]);var x=vr([n.current,e.params],m,{revalidateOnFocus:!1,shouldRetryOnError:!1,revalidateOnReconnect:!1}),g=x.data,P=x.error;return[g||P]}var Cr=function(r){var s=o.useRef();return o.useEffect(function(){s.current=r}),s.current};function Fr(e){return te(e)!=="object"?!1:e===null?!0:!(Q.isValidElement(e)||e.constructor===RegExp||e instanceof Map||e instanceof Set||e instanceof HTMLElement||e instanceof Blob||e instanceof File||Array.isArray(e))}var wr=function(r,s){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,a=Object.keys(s).reduce(function(x,g){var P=s[g];return Le(P)||(x[g]=P),x},{});if(Object.keys(a).length<1||typeof window>"u"||te(r)!=="object"||Le(r)||r instanceof Blob)return r;var n=Array.isArray(r)?[]:{},m=function x(g,P){var v=Array.isArray(g),y=v?[]:{};return g==null||g===void 0?y:(Object.keys(g).forEach(function(d){var b=function I(c,R){return Array.isArray(c)&&c.forEach(function(C,A){if(C){var L=R==null?void 0:R[A];typeof C=="function"&&(R[A]=C(R,d,g)),te(C)==="object"&&!Array.isArray(C)&&Object.keys(C).forEach(function($){var U=L==null?void 0:L[$];if(typeof C[$]=="function"&&U){var O=C[$](L[$],d,g);L[$]=te(O)==="object"?O[$]:O}else te(C[$])==="object"&&Array.isArray(C[$])&&U&&I(C[$],U)}),te(C)==="object"&&Array.isArray(C)&&L&&I(C,L)}}),d},l=P?[P,d].flat(1):[d].flat(1),p=g[d],u=We(a,l),h=function(){var c,R,C=!1;if(typeof u=="function"){R=u==null?void 0:u(p,d,g);var A=te(R);A!=="object"&&A!=="undefined"?(c=d,C=!0):c=R}else c=b(u,p);if(Array.isArray(c)){y=ue(y,c,p);return}te(c)==="object"&&!Array.isArray(n)?n=br(n,c):te(c)==="object"&&Array.isArray(n)?y=f(f({},y),c):(c!==null||c!==void 0)&&(y=ue(y,[c],C?R:p))};if(u&&typeof u=="function"&&h(),!(typeof window>"u")){if(Fr(p)){var V=x(p,l);if(Object.keys(V).length<1)return;y=ue(y,[d],V);return}h()}}),i?y:g)};return n=Array.isArray(r)&&Array.isArray(n)?tr(m(r)):ar({},m(r),n),n},be=function(){return be=Object.assign||function(e){for(var r,s=1,i=arguments.length;s<i;s++){r=arguments[s];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},be.apply(this,arguments)};function jr(e){var r,s=(typeof window<"u"?window:{}).URL,i=new s((r=window==null?void 0:window.location)===null||r===void 0?void 0:r.href);return Object.keys(e).forEach(function(a){var n=e[a];n!=null?Array.isArray(n)?(i.searchParams.delete(a),n.forEach(function(m){i.searchParams.append(a,m)})):n instanceof Date?Number.isNaN(n.getTime())||i.searchParams.set(a,n.toISOString()):typeof n=="object"?i.searchParams.set(a,JSON.stringify(n)):i.searchParams.set(a,n):i.searchParams.delete(a)}),i}function Sr(e,r){var s;e===void 0&&(e={}),r===void 0&&(r={disabled:!1});var i=o.useState(),a=i[1],n=typeof window<"u"&&((s=window==null?void 0:window.location)===null||s===void 0?void 0:s.search),m=o.useMemo(function(){return r.disabled?{}:new URLSearchParams(n||{})},[r.disabled,n]),x=o.useMemo(function(){if(r.disabled)return{};if(typeof window>"u"||!window.URL)return{};var v=[];m.forEach(function(d,b){v.push({key:b,value:d})}),v=v.reduce(function(d,b){return(d[b.key]=d[b.key]||[]).push(b),d},{}),v=Object.keys(v).map(function(d){var b=v[d];return b.length===1?[d,b[0].value]:[d,b.map(function(l){var p=l.value;return p})]});var y=be({},e);return v.forEach(function(d){var b=d[0],l=d[1];y[b]=Ir(b,l,{},e)}),y},[r.disabled,e,m]);function g(v){if(!(typeof window>"u"||!window.URL)){var y=jr(v);window.location.search!==y.search&&window.history.replaceState({},"",y.toString()),m.toString()!==y.searchParams.toString()&&a({})}}o.useEffect(function(){r.disabled||typeof window>"u"||!window.URL||g(be(be({},e),x))},[r.disabled,x]);var P=function(v){g(v)};return o.useEffect(function(){if(r.disabled)return function(){};if(typeof window>"u"||!window.URL)return function(){};var v=function(){a({})};return window.addEventListener("popstate",v),function(){window.removeEventListener("popstate",v)}},[r.disabled]),[x,P]}var Rr={true:!0,false:!1};function Ir(e,r,s,i){if(!s)return r;var a=s[e],n=r===void 0?i[e]:r;return a===Number?Number(n):a===Boolean||r==="true"||r==="false"?Rr[n]:Array.isArray(a)?a.find(function(m){return m==n})||i[e]:n}var Ar=function(r){return G({},r.componentCls,{"&-title":{marginBlockEnd:r.marginXL,fontWeight:"bold"},"&-container":G({flexWrap:"wrap",maxWidth:"100%"},"> div".concat(r.antCls,"-space-item"),{maxWidth:"100%"}),"&-twoLine":G(G(G(G({display:"block",width:"100%"},"".concat(r.componentCls,"-title"),{width:"100%",margin:"8px 0"}),"".concat(r.componentCls,"-container"),{paddingInlineStart:16}),"".concat(r.antCls,"-space-item,").concat(r.antCls,"-form-item"),{width:"100%"}),"".concat(r.antCls,"-form-item"),{"&-control":{display:"flex",alignItems:"center",justifyContent:"flex-end","&-input":{alignItems:"center",justifyContent:"flex-end","&-content":{flex:"none"}}}})})};function Er(e){return He("ProFormGroup",function(r){var s=f(f({},r),{},{componentCls:".".concat(e)});return[Ar(s)]})}var Xe=Q.forwardRef(function(e,r){var s=Q.useContext(qe),i=s.groupProps,a=f(f({},i),e),n=a.children,m=a.collapsible,x=a.defaultCollapsed,g=a.style,P=a.labelLayout,v=a.title,y=v===void 0?e.label:v,d=a.tooltip,b=a.align,l=b===void 0?"start":b,p=a.direction,u=a.size,h=u===void 0?32:u,V=a.titleStyle,I=a.titleRender,c=a.spaceProps,R=a.extra,C=a.autoFocus,A=ze(function(){return x||!1},{value:e.collapsed,onChange:e.onCollapse}),L=le(A,2),$=L[0],U=L[1],O=o.useContext(se.ConfigContext),N=O.getPrefixCls,Y=Ge(e),Z=Y.ColWrapper,ee=Y.RowWrapper,_=N("pro-form-group"),ie=Er(_),ce=ie.wrapSSR,z=ie.hashId,F=m&&t.jsx(nr,{style:{marginInlineEnd:8},rotate:$?void 0:90}),w=t.jsx(mr,{label:F?t.jsxs("div",{children:[F,y]}):y,tooltip:d}),S=o.useCallback(function(k){var oe=k.children;return t.jsx(de,f(f({},c),{},{className:Ae("".concat(_,"-container ").concat(z),c==null?void 0:c.className),size:h,align:l,direction:p,style:f({rowGap:0},c==null?void 0:c.style),children:oe}))},[l,_,p,z,h,c]),j=I?I(w,e):w,E=o.useMemo(function(){var k=[],oe=Q.Children.toArray(n).map(function(K,Ce){var fe;return Q.isValidElement(K)&&K!==null&&K!==void 0&&(fe=K.props)!==null&&fe!==void 0&&fe.hidden?(k.push(K),null):Ce===0&&Q.isValidElement(K)&&C?Q.cloneElement(K,f(f({},K.props),{},{autoFocus:C})):K});return[t.jsx(ee,{Wrapper:S,children:oe},"children"),k.length>0?t.jsx("div",{style:{display:"none"},children:k}):null]},[n,ee,S,C]),B=le(E,2),re=B[0],ne=B[1];return ce(t.jsx(Z,{children:t.jsxs("div",{className:Ae(_,z,G({},"".concat(_,"-twoLine"),P==="twoLine")),style:g,ref:r,children:[ne,(y||d||R)&&t.jsx("div",{className:"".concat(_,"-title ").concat(z).trim(),style:V,onClick:function(){U(!$)},children:R?t.jsxs("div",{style:{display:"flex",width:"100%",alignItems:"center",justifyContent:"space-between"},children:[j,t.jsx("span",{onClick:function(oe){return oe.stopPropagation()},children:R})]}):j}),t.jsx("div",{style:{display:m&&$?"none":void 0},children:re})]})}))});Xe.displayName="ProForm-Group";var Tr=function(r){var s=pr(),i=ae.useFormInstance();if(r.render===!1)return null;var a=r.onSubmit,n=r.render,m=r.onReset,x=r.searchConfig,g=x===void 0?{}:x,P=r.submitButtonProps,v=r.resetButtonProps,y=hr.useToken(),d=y.token,b=function(){i.submit(),a==null||a()},l=function(){i.resetFields(),m==null||m()},p=g.submitText,u=p===void 0?s.getMessage("tableForm.submit","提交"):p,h=g.resetText,V=h===void 0?s.getMessage("tableForm.reset","重置"):h,I=[];v!==!1&&I.push(o.createElement(J,f(f({},Ee(v,["preventDefault"])),{},{key:"rest",onClick:function(C){var A;v!=null&&v.preventDefault||l(),v==null||(A=v.onClick)===null||A===void 0||A.call(v,C)}}),V)),P!==!1&&I.push(o.createElement(J,f(f({type:"primary"},Ee(P||{},["preventDefault"])),{},{key:"submit",onClick:function(C){var A;P!=null&&P.preventDefault||b(),P==null||(A=P.onClick)===null||A===void 0||A.call(P,C)}}),u));var c=n?n(f(f({},r),{},{form:i,submit:b,reset:l}),I):I;return c?Array.isArray(c)?(c==null?void 0:c.length)<1?null:(c==null?void 0:c.length)===1?c[0]:t.jsx("div",{style:{display:"flex",gap:d.marginXS,alignItems:"center"},children:c}):c:null},_r=["children","contentRender","submitter","fieldProps","formItemProps","groupProps","transformKey","formRef","onInit","form","loading","formComponentType","extraUrlParams","syncToUrl","onUrlSearchChange","onReset","omitNil","isKeyPressSubmit","autoFocusFirstInput","grid","rowProps","colProps"],kr=["extraUrlParams","syncToUrl","isKeyPressSubmit","syncToUrlAsImportant","syncToInitialValues","children","contentRender","submitter","fieldProps","proFieldProps","formItemProps","groupProps","dateFormatter","formRef","onInit","form","formComponentType","onReset","grid","rowProps","colProps","omitNil","request","params","initialValues","formKey","readonly","onLoadingChange","loading"],Pe=function(r,s,i){return r===!0?s:sr(r,s,i)},Me=function(r){return!r||Array.isArray(r)?r:[r]};function Vr(e){var r,s=e.children,i=e.contentRender,a=e.submitter;e.fieldProps,e.formItemProps,e.groupProps;var n=e.transformKey,m=e.formRef,x=e.onInit,g=e.form,P=e.loading;e.formComponentType;var v=e.extraUrlParams,y=v===void 0?{}:v,d=e.syncToUrl,b=e.onUrlSearchChange,l=e.onReset,p=e.omitNil,u=p===void 0?!0:p;e.isKeyPressSubmit;var h=e.autoFocusFirstInput,V=h===void 0?!0:h,I=e.grid,c=e.rowProps,R=e.colProps,C=Ke(e,_r),A=ae.useFormInstance(),L=(se===null||se===void 0||(r=se.useConfig)===null||r===void 0?void 0:r.call(se))||{componentSize:"middle"},$=L.componentSize,U=o.useRef(g||A),O=Ge({grid:I,rowProps:c}),N=O.RowWrapper,Y=xe(function(){return A}),Z=o.useMemo(function(){return{getFieldsFormatValue:function(w){var S;return n((S=Y())===null||S===void 0?void 0:S.getFieldsValue(w),u)},getFieldFormatValue:function(){var w,S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],j=Me(S);if(!j)throw new Error("nameList is require");var E=(w=Y())===null||w===void 0?void 0:w.getFieldValue(j),B=j?ue({},j,E):E;return We(n(B,u,j),j)},getFieldFormatValueObject:function(w){var S,j=Me(w),E=(S=Y())===null||S===void 0?void 0:S.getFieldValue(j),B=j?ue({},j,E):E;return n(B,u,j)},validateFieldsReturnFormatValue:function(){var F=Te(he().mark(function S(j){var E,B,re;return he().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:if(!(!Array.isArray(j)&&j)){k.next=2;break}throw new Error("nameList must be array");case 2:return k.next=4,(E=Y())===null||E===void 0?void 0:E.validateFields(j);case 4:return B=k.sent,re=n(B,u),k.abrupt("return",re||{});case 7:case"end":return k.stop()}},S)}));function w(S){return F.apply(this,arguments)}return w}()}},[u,n]),ee=o.useMemo(function(){return Q.Children.toArray(s).map(function(F,w){return w===0&&Q.isValidElement(F)&&V?Q.cloneElement(F,f(f({},F.props),{},{autoFocus:V})):F})},[V,s]),_=o.useMemo(function(){return typeof a=="boolean"||!a?{}:a},[a]),ie=o.useMemo(function(){if(a!==!1)return t.jsx(Tr,f(f({},_),{},{onReset:function(){var w,S,j=n((w=U.current)===null||w===void 0?void 0:w.getFieldsValue(),u);if(_==null||(S=_.onReset)===null||S===void 0||S.call(_,j),l==null||l(j),d){var E,B=Object.keys(n((E=U.current)===null||E===void 0?void 0:E.getFieldsValue(),!1)).reduce(function(re,ne){return f(f({},re),{},G({},ne,j[ne]||void 0))},y);b(Pe(d,B||{},"set"))}},submitButtonProps:f({loading:P},_.submitButtonProps)}),"submitter")},[a,_,P,n,u,l,d,y,b]),ce=o.useMemo(function(){var F=I?t.jsx(N,{children:ee}):ee;return i?i(F,ie,U.current):F},[I,N,ee,i,ie]),z=Cr(e.initialValues);return o.useEffect(function(){if(!(d||!e.initialValues||!z||C.request)){var F=lr(e.initialValues,z);De(F,"initialValues 只在 form 初始化时生效，如果你需要异步加载推荐使用 request，或者 initialValues ? <Form/> : null "),De(F,"The initialValues only take effect when the form is initialized, if you need to load asynchronously recommended request, or the initialValues ? <Form/> : null ")}},[e.initialValues]),o.useImperativeHandle(m,function(){return f(f({},U.current),Z)},[Z,U.current]),o.useEffect(function(){var F,w,S=n((F=U.current)===null||F===void 0||(w=F.getFieldsValue)===null||w===void 0?void 0:w.call(F,!0),u);x==null||x(S,f(f({},U.current),Z))},[]),t.jsx(ur.Provider,{value:f(f({},Z),{},{formRef:U}),children:t.jsx(se,{componentSize:C.size||$,children:t.jsxs(dr.Provider,{value:{grid:I,colProps:R},children:[C.component!==!1&&t.jsx("input",{type:"text",style:{display:"none"}}),ce]})})})}var Be=0;function $r(e){var r=e.extraUrlParams,s=r===void 0?{}:r,i=e.syncToUrl,a=e.isKeyPressSubmit,n=e.syncToUrlAsImportant,m=n===void 0?!1:n,x=e.syncToInitialValues,g=x===void 0?!0:x;e.children,e.contentRender,e.submitter;var P=e.fieldProps,v=e.proFieldProps,y=e.formItemProps,d=e.groupProps,b=e.dateFormatter,l=b===void 0?"string":b,p=e.formRef;e.onInit;var u=e.form,h=e.formComponentType;e.onReset,e.grid,e.rowProps,e.colProps;var V=e.omitNil,I=V===void 0?!0:V,c=e.request,R=e.params,C=e.initialValues,A=e.formKey,L=A===void 0?Be:A;e.readonly;var $=e.onLoadingChange,U=e.loading,O=Ke(e,kr),N=o.useRef({}),Y=ze(!1,{onChange:$,value:U}),Z=le(Y,2),ee=Z[0],_=Z[1],ie=Sr({},{disabled:!i}),ce=le(ie,2),z=ce[0],F=ce[1],w=o.useRef(ir());o.useEffect(function(){Be+=0},[]);var S=Pr({request:c,params:R,proFieldKey:L}),j=le(S,1),E=j[0],B=o.useContext(se.ConfigContext),re=B.getPrefixCls,ne=re("pro-form"),k=He("ProForm",function(q){return G({},".".concat(ne),G({},"> div:not(".concat(q.proComponentsCls,"-form-light-filter)"),{".pro-field":{maxWidth:"100%","@media screen and (max-width: 575px)":{maxWidth:"calc(93vw - 48px)"},"&-xs":{width:104},"&-s":{width:216},"&-sm":{width:216},"&-m":{width:328},"&-md":{width:328},"&-l":{width:440},"&-lg":{width:440},"&-xl":{width:552}}}))}),oe=k.wrapSSR,K=k.hashId,Ce=o.useState(function(){return i?Pe(i,z,"get"):{}}),fe=le(Ce,2),Ne=fe[0],Ze=fe[1],Fe=o.useRef({}),we=o.useRef({}),je=xe(function(q,T,D){return wr(cr(q,l,we.current,T,D),Fe.current,T)});o.useEffect(function(){g||Ze({})},[g]);var Ue=xe(function(){return f(f({},z),s)});o.useEffect(function(){i&&F(Pe(i,Ue(),"set"))},[s,Ue,i]);var er=o.useMemo(function(){if(!(typeof window>"u")&&h&&["DrawerForm"].includes(h))return function(q){return q.parentNode||document.body}},[h]),rr=xe(Te(he().mark(function q(){var T,D,H,ye,ve,ge,me;return he().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:if(O.onFinish){M.next=2;break}return M.abrupt("return");case 2:if(!ee){M.next=4;break}return M.abrupt("return");case 4:return M.prev=4,H=N==null||(T=N.current)===null||T===void 0||(D=T.getFieldsFormatValue)===null||D===void 0?void 0:D.call(T),ye=O.onFinish(H),ye instanceof Promise&&_(!0),M.next=10,ye;case 10:i&&(me=Object.keys(N==null||(ve=N.current)===null||ve===void 0||(ge=ve.getFieldsFormatValue)===null||ge===void 0?void 0:ge.call(ve,void 0,!1)).reduce(function(pe,Oe){var Se;return f(f({},pe),{},G({},Oe,(Se=H[Oe])!==null&&Se!==void 0?Se:void 0))},s),Object.keys(z).forEach(function(pe){me[pe]!==!1&&me[pe]!==0&&!me[pe]&&(me[pe]=void 0)}),F(Pe(i,me,"set"))),_(!1),M.next=18;break;case 14:M.prev=14,M.t0=M.catch(4),console.log(M.t0),_(!1);case 18:case"end":return M.stop()}},q,null,[[4,14]])})));return o.useImperativeHandle(p,function(){return N.current},[!E]),!E&&e.request?t.jsx("div",{style:{paddingTop:50,paddingBottom:50,textAlign:"center"},children:t.jsx(xr,{})}):oe(t.jsx(Je.Provider,{value:{mode:e.readonly?"read":"edit"},children:t.jsx(yr,{needDeps:!0,children:t.jsx(qe.Provider,{value:{formRef:N,fieldProps:P,proFieldProps:v,formItemProps:y,groupProps:d,formComponentType:h,getPopupContainer:er,formKey:w.current,setFieldValueType:function(T,D){var H=D.valueType,ye=H===void 0?"text":H,ve=D.dateFormat,ge=D.transform;Array.isArray(T)&&(Fe.current=ue(Fe.current,T,ge),we.current=ue(we.current,T,{valueType:ye,dateFormat:ve}))}},children:t.jsx(or.Provider,{value:{},children:t.jsx(ae,f(f({onKeyPress:function(T){if(a&&T.key==="Enter"){var D;(D=N.current)===null||D===void 0||D.submit()}},autoComplete:"off",form:u},Ee(O,["ref","labelWidth","autoFocusFirstInput"])),{},{ref:function(T){N.current&&(N.current.nativeElement=T==null?void 0:T.nativeElement)},initialValues:m?f(f(f({},C),E),Ne):f(f(f({},Ne),C),E),onValuesChange:function(T,D){var H;O==null||(H=O.onValuesChange)===null||H===void 0||H.call(O,je(T,!!I),je(D,!!I))},className:Ae(e.className,ne,K),onFinish:rr,children:t.jsx(Vr,f(f({transformKey:je,autoComplete:"off",loading:ee,onUrlSearchChange:F},e),{},{formRef:N,initialValues:f(f({},C),E)}))}))})})})}))}function W(e){return t.jsx($r,f({layout:"vertical",contentRender:function(s,i){return t.jsxs(t.Fragment,{children:[s,i]})}},e))}W.Group=Xe;W.useForm=ae.useForm;W.Item=fr;W.useWatch=ae.useWatch;W.ErrorList=ae.ErrorList;W.Provider=ae.Provider;W.useFormInstance=ae.useFormInstance;W.EditOrReadOnlyContext=Je;W.Group;const Ye=o.createContext(void 0),Nr=({children:e})=>{const[r,s]=o.useState([]),[i,a]=o.useState([]),[n,m]=o.useState([]);o.useEffect(()=>{const u=localStorage.getItem("approvalTypes"),h=localStorage.getItem("approvalConditions"),V=localStorage.getItem("approvalEvents");u&&s(JSON.parse(u)),h&&a(JSON.parse(h)),V&&m(JSON.parse(V))},[]),o.useEffect(()=>{localStorage.setItem("approvalTypes",JSON.stringify(r))},[r]),o.useEffect(()=>{localStorage.setItem("approvalConditions",JSON.stringify(i))},[i]),o.useEffect(()=>{localStorage.setItem("approvalEvents",JSON.stringify(n))},[n]);const x=u=>{s([...r,u])},g=u=>{s(r.map(h=>h.id===u.id?u:h))},P=u=>{s(r.filter(h=>h.id!==u))},v=u=>{a([...i,u])},y=u=>{a(i.map(h=>h.typeId===u.typeId?u:h))},d=u=>{a(i.filter(h=>h.typeId!==u))},b=u=>{m([...n,u])},l=u=>{m(n.map(h=>h.eventId===u.eventId?u:h))},p=u=>{m(n.filter(h=>h.eventId!==u))};return t.jsx(Ye.Provider,{value:{approvalTypes:r,approvalConditions:i,approvalEvents:n,addApprovalType:x,updateApprovalType:g,deleteApprovalType:P,addApprovalCondition:v,updateApprovalCondition:y,deleteApprovalCondition:d,addApprovalEvent:b,updateApprovalEvent:l,deleteApprovalEvent:p},children:e})},$e=()=>{const e=o.useContext(Ye);if(!e)throw new Error("useApprovalFlowContext must be used within an ApprovalFlowProvider");return e},Ur=()=>{const{approvalTypes:e,addApprovalType:r,updateApprovalType:s,deleteApprovalType:i}=$e(),[a,n]=o.useState(!1),[m,x]=o.useState(null),g=o.useRef(),P=()=>{x(null),n(!0)},v=l=>{x(l),n(!0)},y=l=>{i(l)},d=l=>{var p;m?s({...m,...l}):r({id:Date.now(),...l}),(p=g.current)==null||p.resetFields(),n(!1)},b=[{title:"自增id",align:"center",dataIndex:"id",key:"id"},{title:"类型名称",align:"center",dataIndex:"name",key:"name"},{title:"父级id",align:"center",dataIndex:"parentId",key:"parentId"},{title:"大类父级id",align:"center",dataIndex:"categoryParentId",key:"categoryParentId"},{title:"流程父级id",align:"center",dataIndex:"flowParentId",key:"flowParentId"},{title:"操作",align:"center",key:"action",render:(l,p)=>t.jsxs(de,{size:4,children:[t.jsx(J,{type:"link",onClick:()=>v(p),children:"编辑"}),t.jsx(ke,{placement:"top",title:"确认删除该行数据吗？",onConfirm:()=>y(p.id),children:t.jsx(J,{type:"link",danger:!0,children:"删除"})})]})}];return t.jsxs("div",{children:[t.jsx("section",{style:{display:"flex",justifyContent:"end",marginBottom:16},children:t.jsx(de,{size:8,children:t.jsx(J,{type:"primary",onClick:P,children:"新增"})})}),t.jsx(_e,{columns:b,dataSource:e,pagination:{pageSize:10}}),t.jsx(Ve,{title:m?"编辑审批类型":"新增审批类型",visible:a,onClose:()=>n(!1),destroyOnClose:!0,width:400,children:t.jsxs(W,{formRef:g,initialValues:m,onFinish:d,children:[t.jsx(X,{name:"name",label:"类型名称"}),t.jsx(X,{name:"parentId",label:"父级id"}),t.jsx(X,{name:"categoryParentId",label:"大类父级id",initialValue:0}),t.jsx(X,{name:"flowParentId",label:"流程父级id"})]})})]})},Or=()=>{const{approvalConditions:e,addApprovalCondition:r,updateApprovalCondition:s,deleteApprovalCondition:i}=$e(),[a,n]=o.useState(!1),[m,x]=o.useState(null),g=o.useRef(),P=()=>{x(null),n(!0)},v=l=>{x(l),n(!0)},y=l=>{i(l)},d=l=>{var p;m?s({...m,...l}):r({typeId:Date.now(),...l}),(p=g.current)==null||p.resetFields(),n(!1)},b=[{align:"center",title:"类型id",dataIndex:"typeId",key:"typeId"},{align:"center",title:"条件字段名",dataIndex:"fieldName",key:"fieldName"},{align:"center",title:"运算符",dataIndex:"operator",key:"operator"},{align:"center",title:"值",dataIndex:"value",key:"value"},{align:"center",title:"操作",key:"action",render:(l,p)=>t.jsxs(de,{size:4,children:[t.jsx(J,{type:"link",onClick:()=>v(p),children:"编辑"}),t.jsx(ke,{placement:"top",title:"确认删除该行数据吗？",onConfirm:()=>y(p.id),children:t.jsx(J,{type:"link",danger:!0,children:"删除"})})]})}];return t.jsxs("div",{children:[t.jsx("section",{style:{display:"flex",justifyContent:"end",marginBottom:16},children:t.jsx(de,{size:8,children:t.jsx(J,{type:"primary",onClick:P,children:"新增"})})}),t.jsx(_e,{columns:b,dataSource:e,pagination:{pageSize:10}}),t.jsx(Ve,{title:m?"编辑审批流条件":"新增审批流条件",visible:a,destroyOnClose:!0,onClose:()=>n(!1),width:400,children:t.jsxs(W,{formRef:g,initialValues:m,onFinish:d,children:[t.jsx(X,{name:"typeId",label:"类型id"}),t.jsx(X,{name:"fieldName",label:"条件字段名"}),t.jsx(X,{name:"operator",label:"运算符"}),t.jsx(X,{name:"value",label:"值"})]})})]})},Dr=()=>{const{approvalEvents:e,addApprovalEvent:r,updateApprovalEvent:s,deleteApprovalEvent:i}=$e(),[a,n]=o.useState(!1),[m,x]=o.useState(null),g=o.useRef(),P=()=>{x(null),n(!0)},v=l=>{x(l),n(!0)},y=l=>{i(l)},d=l=>{var p;m?s({...m,...l}):r({eventId:Date.now(),...l}),(p=g.current)==null||p.resetFields(),n(!1)},b=[{align:"center",title:"事件id",dataIndex:"eventId",key:"eventId"},{align:"center",title:"事件名称",dataIndex:"eventName",key:"eventName"},{align:"center",title:"操作",key:"action",render:(l,p)=>t.jsxs(de,{size:4,children:[t.jsx(J,{type:"link",onClick:()=>v(p),children:"编辑"}),t.jsx(ke,{placement:"top",title:"确认删除该行数据吗？",onConfirm:()=>y(p.id),children:t.jsx(J,{type:"link",danger:!0,children:"删除"})})]})}];return t.jsxs("div",{children:[t.jsx("section",{style:{display:"flex",justifyContent:"end",marginBottom:16},children:t.jsx(de,{size:8,children:t.jsx(J,{type:"primary",onClick:P,children:"新增"})})}),t.jsx(_e,{columns:b,dataSource:e,pagination:{pageSize:10}}),t.jsx(Ve,{title:m?"编辑审批流事件":"新增审批流事件",visible:a,destroyOnClose:!0,onClose:()=>n(!1),width:400,children:t.jsxs(W,{formRef:g,initialValues:m,onFinish:d,children:[t.jsx(X,{name:"eventId",label:"事件id"}),t.jsx(X,{name:"eventName",label:"事件名称"})]})})]})},{TabPane:Ie}=Qe,xt=()=>t.jsx(Nr,{children:t.jsx(gr,{direction:"column",gutter:[0,16],className:"h-full",children:t.jsxs(Qe,{defaultActiveKey:"1",children:[t.jsx(Ie,{tab:"审批类型管理",children:t.jsx(Ur,{})},"1"),t.jsx(Ie,{tab:"审批流条件管理",children:t.jsx(Or,{})},"2"),t.jsx(Ie,{tab:"审批流事件管理",children:t.jsx(Dr,{})},"3")]})})});export{xt as Component};
